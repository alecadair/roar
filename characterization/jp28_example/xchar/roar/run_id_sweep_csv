#! /bin/csh -f
#
# Author: Alec Stefan Adair
# This script generates 18 corners of CSV LUT files for C/ID
#

# PFET/NFET MODEL 
set NFET=nfet
set PFET=pfet

# Si Speed
set SS=ss
set TT=tt
set FF=ff

# Temperature
set COLD=cold
set ROOM=room
set HOT=hot

set NSSCOLD=$NFET$SS$COLD
set NTTCOLD=$NFET$TT$COLD
set NFFCOLD=$NFET$FF$COLD

set NSSROOM=$NFET$SS$ROOM
set NTTROOM=$NFET$TT$ROOM
set NFFROOM=$NFET$FF$ROOM

set NSSHOT=$NFET$SS$HOT
set NTTHOT=$NFET$TT$HOT
set NFFHOT=$NFET$FF$HOT

set PSSCOLD=$PFET$SS$COLD
set PTTCOLD=$PFET$TT$COLD
set PFFCOLD=$PFET$FF$COLD

set PSSROOM=$PFET$SS$ROOM
set PTTROOM=$PFET$TT$ROOM
set PFFROOM=$PFET$FF$ROOM

set PSSHOT=$PFET$SS$HOT
set PTTHOT=$PFET$TT$HOT
set PFFHOT=$PFET$FF$HOT

set lengths=(20n 80n 120n 240n 360n 480n 600n 720n 840n 1u 1.2u 1.4u 1.6u 1.8u 2u)
set ncorners=($NSSCOLD $NTTCOLD $NFFCOLD $NSSROOM $NTTROOM $NFFROOM $NSSHOT $NTTHOT $NFFHOT)
set pcorners=($PSSCOLD $PTTCOLD $PFFCOLD $PSSROOM $PTTROOM $PFFROOM $PSSHOT $PTTHOT $PFFHOT)

# Lookup Table CSV generated by MDL
set TECHLUT=techLUT

foreach length ($lengths)
	echo "parameters L=$length " > n_netlist_$length
	echo "parameters L=$length " > p_netlist_$length
	cat n_netlist_template >> n_netlist_$length
	cat p_netlist_template >> p_netlist_$length
	cp n_netlist_$length n_netlist
	cp p_netlist_$length p_netlist
	mkdir "LUT$lengthn"
	mkdir "LUT$lengthp"
	set LOOKUPTABLEDIRN=LUTn$length
	set LOOKUPTABLEDIRP=LUTP$length
	foreach corner ($ncorners)
		spectremdl -format psfascii -batch nfet_characterization.mdl -design $corner.scs
		if ( -f $TECHLUT.csv ) then 
			##mv $TECHLUT.csv lookuptables/$NSSCOLD.csv
			mv $TECHLUT.csv $LOOKUPTABLEDIRN/$corner.csv
		endif
	end #foreach	
	foreach corner ($pcorners)
		spectremdl -format psfascii -batch nfet_characterization.mdl -design $corner.scs
		if ( -f $TECHLUT.csv ) then 
			##mv $TECHLUT.csv lookuptables/$NSSCOLD.csv
			mv $TECHLUT.csv $LOOKUPTABLEDIRP/$corner.csv
		endif
	end #foreach

		#spectremdl -format psfascii -batch nfet_characterization.mdl -design $NSSCOLD.scs
		#if ( -f $TECHLUT.csv ) then 
			##mv $TECHLUT.csv lookuptables/$NSSCOLD.csv
			#mv $TECHLUT.csv LUT_
		#endif
		
		#spectremdl -format psfascii -batch nfet_characterization.mdl -design $NTTCOLD.scs
		#if ( -f $TECHLUT.csv ) then 
			#mv $TECHLUT.csv lookuptables/$NTTCOLD.csv
			#mv $TECHLUT.csv lookuptables/$NTTCOLD.csv	
		#endif
		
		#spectremdl -format psfascii -batch nfet_characterization.mdl -design $NFFCOLD.scs
		#if ( -f $TECHLUT.csv ) then 
			#mv $TECHLUT.csv lookuptables/$NFFCOLD.csv
			#mv $TECHLUT.csv lookuptables/$NFFCOLD.csv	
		#endif
		
		#spectremdl -format psfascii -batch nfet_characterization.mdl -design $NSSROOM.scs
		#if ( -f $TECHLUT.csv ) then 
			#mv $TECHLUT.csv lookuptables/$NSSROOM.csv
			#mv $TECHLUT.csv lookuptables/$NSSROOM.csv	
		#endif
		
		#spectremdl -format psfascii -batch nfet_characterization.mdl -design $NTTROOM.scs
		#if ( -f $TECHLUT.csv ) then 
			#mv $TECHLUT.csv lookuptables/$NTTROOM.csv
			#mv $TECHLUT.csv lookuptables/$NTTROOM.csv	
		#endif
		
		#spectremdl -format psfascii -batch nfet_characterization.mdl -design $NFFROOM.scs
		#if ( -f $TECHLUT.csv ) then 
			#mv $TECHLUT.csv lookuptables/$NFFROOM.csv
			#mv $TECHLUT.csv lookuptables/$NFFROOM.csv	
		#endif
		
		#spectremdl -format psfascii -batch nfet_characterization.mdl -design $NSSHOT.scs
		#if ( -f $TECHLUT.csv ) then 
			#mv $TECHLUT.csv lookuptables/$NSSHOT.csv
			#mv $TECHLUT.csv lookuptables/$NSSHOT.csv	
		#endif
		
		#spectremdl -format psfascii -batch fet_characterization.mdl -design $NTTHOT.scs
		#if ( -f $TECHLUT.csv ) then 
			#mv $TECHLUT.csv lookuptables/$NTTHOT.csv
			#mv $TECHLUT.csv lookuptables/$NTTHOT.csv	
		#endif
		
		#spectremdl -format psfascii -batch nfet_characterization.mdl -design $NFFHOT.scs
		#if ( -f $TECHLUT.csv ) then 
			#mv $TECHLUT.csv lookuptables/$NFFHOT.csv
			#mv $TECHLUT.csv lookuptables/$NFFHOT.csv
		#endif



#		spectremdl -format psfascii -batch fet_characterization.mdl -design $PSSCOLD.scs
#		mv $TECHLUT.csv lookuptables/$PSSCOLD.csv
#
#		spectremdl -format psfascii -batch fet_characterization.mdl -design $PTTCOLD.scs
#		mv $TECHLUT.csv lookuptables/$PTTCOLD.csv
#
#		spectremdl -format psfascii -batch fet_characterization.mdl -design $PFFCOLD.scs
#		mv $TECHLUT.csv lookuptables/$PFFCOLD.csv
#
#		spectremdl -format psfascii -batch fet_characterization.mdl -design $PSSCOLD.scs
#		mv $TECHLUT.csv lookuptables/$PSSCOLD.csv
#
#		spectremdl -format psfascii -batch fet_characterization.mdl -design $PSSROOM.scs
#		mv $TECHLUT.csv lookuptables/$PSSROOM.csv
#
#		spectremdl -format psfascii -batch fet_characterization.mdl -design $PTTROOM.scs
#		mv $TECHLUT.csv lookuptables/$PTTROOM.csv
#
#		spectremdl -format psfascii -batch fet_characterization.mdl -design $PFFROOM.scs
#		mv $TECHLUT.csv lookuptables/$PFFROOM.csv
#
#		spectremdl -format psfascii -batch fet_characterization.mdl -design $PSSHOT.scs
#		mv $TECHLUT.csv lookuptables/$PSSHOT.csv
#
#		spectremdl -format psfascii -batch fet_characterization.mdl -design $PTTHOT.scs
#		mv $TECHLUT.csv lookuptables/$PTTHOT.csv
#
#		spectremdl -format psfascii -batch fet_characterization.mdl -design $PFFHOT.scs
#		mv $TECHLUT.csv lookuptables/$PFFHOT.csv


end #foreach
source clean